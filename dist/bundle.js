var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{tE:()=>S,jt:()=>d,WQ:()=>w,jf:()=>x,XR:()=>y,XD:()=>O,Qr:()=>N,yZ:()=>v,yp:()=>E,lw:()=>b,SJ:()=>B,Nj:()=>P,A$:()=>I,Re:()=>g});var r=1e6,n="[big.js] ",i=n+"Invalid ",s=i+"decimal places",u=i+"rounding mode",o=n+"Division by zero",c={},l=void 0,a=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function h(t,e,r,n){var i=t.c;if(r===l&&(r=t.constructor.RM),0!==r&&1!==r&&2!==r&&3!==r)throw Error(u);if(e<1)n=3===r&&(n||!!i[0])||0===e&&(1===r&&i[0]>=5||2===r&&(i[0]>5||5===i[0]&&(n||i[1]!==l))),i.length=1,n?(t.e=t.e-e+1,i[0]=1):i[0]=t.e=0;else if(e<i.length){if(n=1===r&&i[e]>=5||2===r&&(i[e]>5||5===i[e]&&(n||i[e+1]!==l||1&i[e-1]))||3===r&&(n||!!i[0]),i.length=e,n)for(;++i[--e]>9;)if(i[e]=0,0===e){++t.e,i.unshift(1);break}for(e=i.length;!i[--e];)i.pop()}return t}function f(t,e,r){var n=t.e,i=t.c.join(""),s=i.length;if(e)i=i.charAt(0)+(s>1?"."+i.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)i="0"+i;i="0."+i}else if(n>0)if(++n>s)for(n-=s;n--;)i+="0";else n<s&&(i=i.slice(0,n)+"."+i.slice(n));else s>1&&(i=i.charAt(0)+"."+i.slice(1));return t.s<0&&r?"-"+i:i}c.abs=function(){var t=new this.constructor(this);return t.s=1,t},c.cmp=function(t){var e,r=this,n=r.c,i=(t=new r.constructor(t)).c,s=r.s,u=t.s,o=r.e,c=t.e;if(!n[0]||!i[0])return n[0]?s:i[0]?-u:0;if(s!=u)return s;if(e=s<0,o!=c)return o>c^e?1:-1;for(u=(o=n.length)<(c=i.length)?o:c,s=-1;++s<u;)if(n[s]!=i[s])return n[s]>i[s]^e?1:-1;return o==c?0:o>c^e?1:-1},c.div=function(t){var e=this,n=e.constructor,i=e.c,u=(t=new n(t)).c,c=e.s==t.s?1:-1,a=n.DP;if(a!==~~a||a<0||a>r)throw Error(s);if(!u[0])throw Error(o);if(!i[0])return t.s=c,t.c=[t.e=0],t;var f,p,m,d,w,g=u.slice(),b=f=u.length,N=i.length,v=i.slice(0,f),P=v.length,I=t,D=I.c=[],E=0,y=a+(I.e=e.e-t.e)+1;for(I.s=c,c=y<0?0:y,g.unshift(0);P++<f;)v.push(0);do{for(m=0;m<10;m++){if(f!=(P=v.length))d=f>P?1:-1;else for(w=-1,d=0;++w<f;)if(u[w]!=v[w]){d=u[w]>v[w]?1:-1;break}if(!(d<0))break;for(p=P==f?u:g;P;){if(v[--P]<p[P]){for(w=P;w&&!v[--w];)v[w]=9;--v[w],v[P]+=10}v[P]-=p[P]}for(;!v[0];)v.shift()}D[E++]=d?m:++m,v[0]&&d?v[P]=i[b]||0:v=[i[b]]}while((b++<N||v[0]!==l)&&c--);return D[0]||1==E||(D.shift(),I.e--,y--),E>y&&h(I,y,n.RM,v[0]!==l),I},c.eq=function(t){return 0===this.cmp(t)},c.gt=function(t){return this.cmp(t)>0},c.gte=function(t){return this.cmp(t)>-1},c.lt=function(t){return this.cmp(t)<0},c.lte=function(t){return this.cmp(t)<1},c.minus=c.sub=function(t){var e,r,n,i,s=this,u=s.constructor,o=s.s,c=(t=new u(t)).s;if(o!=c)return t.s=-c,s.plus(t);var l=s.c.slice(),a=s.e,h=t.c,f=t.e;if(!l[0]||!h[0])return h[0]?t.s=-c:l[0]?t=new u(s):t.s=1,t;if(o=a-f){for((i=o<0)?(o=-o,n=l):(f=a,n=h),n.reverse(),c=o;c--;)n.push(0);n.reverse()}else for(r=((i=l.length<h.length)?l:h).length,o=c=0;c<r;c++)if(l[c]!=h[c]){i=l[c]<h[c];break}if(i&&(n=l,l=h,h=n,t.s=-t.s),(c=(r=h.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;r>o;){if(l[--r]<h[r]){for(e=r;e&&!l[--e];)l[e]=9;--l[e],l[r]+=10}l[r]-=h[r]}for(;0===l[--c];)l.pop();for(;0===l[0];)l.shift(),--f;return l[0]||(t.s=1,l=[f=0]),t.c=l,t.e=f,t},c.mod=function(t){var e,r=this,n=r.constructor,i=r.s,s=(t=new n(t)).s;if(!t.c[0])throw Error(o);return r.s=t.s=1,e=1==t.cmp(r),r.s=i,t.s=s,e?new n(r):(i=n.DP,s=n.RM,n.DP=n.RM=0,r=r.div(t),n.DP=i,n.RM=s,this.minus(r.times(t)))},c.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t},c.plus=c.add=function(t){var e,r,n,i=this,s=i.constructor;if(t=new s(t),i.s!=t.s)return t.s=-t.s,i.minus(t);var u=i.e,o=i.c,c=t.e,l=t.c;if(!o[0]||!l[0])return l[0]||(o[0]?t=new s(i):t.s=i.s),t;if(o=o.slice(),e=u-c){for(e>0?(c=u,n=l):(e=-e,n=o),n.reverse();e--;)n.push(0);n.reverse()}for(o.length-l.length<0&&(n=l,l=o,o=n),e=l.length,r=0;e;o[e]%=10)r=(o[--e]=o[e]+l[e]+r)/10|0;for(r&&(o.unshift(r),++c),e=o.length;0===o[--e];)o.pop();return t.c=o,t.e=c,t},c.pow=function(t){var e=this,r=new e.constructor("1"),n=r,s=t<0;if(t!==~~t||t<-1e6||t>1e6)throw Error(i+"exponent");for(s&&(t=-t);1&t&&(n=n.times(e)),t>>=1;)e=e.times(e);return s?r.div(n):n},c.prec=function(t,e){if(t!==~~t||t<1||t>r)throw Error(i+"precision");return h(new this.constructor(this),t,e)},c.round=function(t,e){if(t===l)t=0;else if(t!==~~t||t<-r||t>r)throw Error(s);return h(new this.constructor(this),t+this.e+1,e)},c.sqrt=function(){var t,e,r,i=this,s=i.constructor,u=i.s,o=i.e,c=new s("0.5");if(!i.c[0])return new s(i);if(u<0)throw Error(n+"No square root");0===(u=Math.sqrt(i+""))||u===1/0?((e=i.c.join("")).length+o&1||(e+="0"),o=((o+1)/2|0)-(o<0||1&o),t=new s(((u=Math.sqrt(e))==1/0?"5e":(u=u.toExponential()).slice(0,u.indexOf("e")+1))+o)):t=new s(u+""),o=t.e+(s.DP+=4);do{r=t,t=c.times(r.plus(i.div(r)))}while(r.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return h(t,(s.DP-=4)+t.e+1,s.RM)},c.times=c.mul=function(t){var e,r=this,n=r.constructor,i=r.c,s=(t=new n(t)).c,u=i.length,o=s.length,c=r.e,l=t.e;if(t.s=r.s==t.s?1:-1,!i[0]||!s[0])return t.c=[t.e=0],t;for(t.e=c+l,u<o&&(e=i,i=s,s=e,l=u,u=o,o=l),e=new Array(l=u+o);l--;)e[l]=0;for(c=o;c--;){for(o=0,l=u+c;l>c;)o=e[l]+s[c]*i[l-c-1]+o,e[l--]=o%10,o=o/10|0;e[l]=o}for(o?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t},c.toExponential=function(t,e){var n=this,i=n.c[0];if(t!==l){if(t!==~~t||t<0||t>r)throw Error(s);for(n=h(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return f(n,!0,!!i)},c.toFixed=function(t,e){var n=this,i=n.c[0];if(t!==l){if(t!==~~t||t<0||t>r)throw Error(s);for(t=t+(n=h(new n.constructor(n),t+n.e+1,e)).e+1;n.c.length<t;)n.c.push(0)}return f(n,!1,!!i)},c[Symbol.for("nodejs.util.inspect.custom")]=c.toJSON=c.toString=function(){var t=this,e=t.constructor;return f(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])},c.toNumber=function(){var t=Number(f(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(t.toString()))throw Error(n+"Imprecise conversion");return t},c.toPrecision=function(t,e){var n=this,s=n.constructor,u=n.c[0];if(t!==l){if(t!==~~t||t<1||t>r)throw Error(i+"precision");for(n=h(new s(n),t,e);n.c.length<t;)n.c.push(0)}return f(n,t<=n.e||n.e<=s.NE||n.e>=s.PE,!!u)},c.valueOf=function(){var t=this,e=t.constructor;if(!0===e.strict)throw Error(n+"valueOf disallowed");return f(t,t.e<=e.NE||t.e>=e.PE,!0)};const p=function t(){function e(r){var n=this;if(!(n instanceof e))return r===l?t():new e(r);if(r instanceof e)n.s=r.s,n.e=r.e,n.c=r.c.slice();else{if("string"!=typeof r){if(!0===e.strict&&"bigint"!=typeof r)throw TypeError(i+"value");r=0===r&&1/r<0?"-0":String(r)}!function(t,e){var r,n,s;if(!a.test(e))throw Error(i+"number");for(t.s="-"==e.charAt(0)?(e=e.slice(1),-1):1,(r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),s=e.length,n=0;n<s&&"0"==e.charAt(n);)++n;if(n==s)t.c=[t.e=0];else{for(;s>0&&"0"==e.charAt(--s););for(t.e=r-n-1,t.c=[],r=0;n<=s;)t.c[r++]=+e.charAt(n++)}}(n,r)}n.constructor=e}return e.prototype=c,e.DP=20,e.RM=1,e.NE=-7,e.PE=21,e.strict=!1,e.roundDown=0,e.roundHalfUp=1,e.roundHalfEven=2,e.roundUp=3,e}(),m=["+","-","/","*"],d=5;function w(t,e){return"Infinity"===t?"Infinity":t.add(e)}function g(t,e){return"Infinity"===t?"Infinity":t.sub(e)}function b(t,e){return"Infinity"===t?"Infinity":t.mul(e)}function N(t,e){return"Infinity"===t?"Infinity":t.div(e)}function v(t){switch(t){case"+":return w;case"-":return g;case"*":return b;case"/":return N;default:return function(t){throw new Error(`Unexpected object: ${t}`)}(t)}}function P(t,e,r){return v(t)(e,r)}function I(t){if("string"!=typeof t)throw new Error("Expected string, got "+typeof t);if(1!==t.length||!D(t))throw new Error(`Invalid operator: ${t}`);return t}function D(t){return m.includes(t)}function E(t){return"string"==typeof t&&/^\d$/.test(t)}function y(t){if("number"!=typeof t||!Number.isInteger(t)||t<0||t>9)throw new Error(`Value ${t} is not a single digit integer`)}function x(t){if(null===t)throw new Error("Value is null")}function B(){throw new Error("Not yet implemented")}function O(t){if(t<1||!Number.isInteger(t))throw new Error("Decimal place must be a positive integer");return p(10).pow(-t)}class S{accumulator=null;buttonHandlers={".":()=>this.pressDecimalButton(),"=":()=>this.pressEqualsButton(),Backspace:()=>this.pressBackspaceButton(),Clear:()=>this.pressClearButton()};currentInputNumber=null;decimalButtonPressed=!1;keyHandlers={".":()=>this.pressDecimalButton(),"=":()=>this.pressEqualsButton(),Backspace:()=>this.pressBackspaceButton(),Enter:()=>this.pressEqualsButton()};nextDecimalPlace=null;nextOperator=null;applyCurrentOperator(t){null!==t&&null!==this.currentInputNumber&&null!==this.accumulator&&(this.accumulator=P(t,this.accumulator,this.currentInputNumber))}applyPendingOperation(){null!==this.nextOperator&&null!==this.accumulator&&null!==this.currentInputNumber&&(this.accumulator=this.calculateResult(this.nextOperator,this.accumulator,this.currentInputNumber))}calculateResult(t,e,r){return"/"===t&&r.eq(0)?"Infinity":P(t,e,r)}getAccumulator(){return this.accumulator}getCurrentInputNumber(){return this.currentInputNumber}getDecimalButtonPressed(){return this.decimalButtonPressed}getDisplayString(){return null!==this.currentInputNumber?this.currentInputNumber.toString():null!==this.nextOperator?this.nextOperator:null!==this.accumulator?"Infinity"===this.accumulator?"No division by zero is allowed, you silly goose!":this.accumulator.round(d).toString():"0"}getNextDecimalPlace(){return this.nextDecimalPlace}getNextOperator(){return this.nextOperator}handleDecimalBackspace(){if(x(this.nextDecimalPlace),this.nextDecimalPlace<1)throw new Error(`Next decimal place should not be ${this.nextDecimalPlace}`);if(this.nextDecimalPlace>1)this.removeLastDecimalPlace();else{if(1!==this.nextDecimalPlace)throw new Error(`Next decimal place should not be ${this.nextDecimalPlace}`);this.removeDecimalPoint()}}handleUiButtonPressed(t){if(E(t))this.pressNumberButton(Number(t));else if(D(t))this.pressOperatorButton(t);else{const e=this.buttonHandlers[t];if(void 0===e)throw new Error(`Invalid button: ${t}`);e()}}handleWholeNumberBackspace(){this.currentInputNumber=this.currentInputNumber.div(10).round(0,0)}isDecimalButtonDisabledInUi(){return this.decimalButtonPressed}pressBackspaceButton(){null!==this.currentInputNumber&&(this.decimalButtonPressed?this.handleDecimalBackspace():this.handleWholeNumberBackspace())}pressClearButton(){this.accumulator=null,this.nextOperator=null,this.resetInputNumberState()}pressDecimalButton(){this.decimalButtonPressed||(this.decimalButtonPressed=!0,this.nextDecimalPlace=1)}pressEqualsButton(){this.applyPendingOperation(),this.updateAccumulatorIfNeeded(),this.resetCalculatorState()}pressKey(t){if("string"!=typeof t)throw new Error("Expected string, got "+typeof t);if(E(t))return void this.pressNumberButton(Number(t));if(D(t))return void this.pressOperatorButton(t);const e=this.keyHandlers[t];if(void 0===e)throw new Error(`Invalid key: ${t}`);e()}pressKeys(t){if("string"!=typeof t)throw new Error("Expected string, got "+typeof t);for(const e of t)this.pressKey(e)}pressNumberButton(t){y(t);let e=p(1);this.decimalButtonPressed&&(x(this.nextDecimalPlace),e=O(this.nextDecimalPlace)),null!==this.currentInputNumber?this.decimalButtonPressed?(x(this.nextDecimalPlace),this.currentInputNumber=this.currentInputNumber.plus(p(t).mul(e)),this.nextDecimalPlace+=1):this.currentInputNumber=this.currentInputNumber.mul(10).add(t):this.decimalButtonPressed?(x(this.nextDecimalPlace),this.currentInputNumber=p(t).mul(e),this.nextDecimalPlace+=1):this.currentInputNumber=p(t)}pressOperatorButton(t){const e=I(t),r=this.nextOperator;this.nextOperator=e,this.applyCurrentOperator(r),this.updateAccumulatorIfNeeded(),this.resetInputNumberState()}removeDecimalPoint(){this.decimalButtonPressed=!1,this.nextDecimalPlace=null}removeLastDecimalPlace(){x(this.nextDecimalPlace);const t=this.nextDecimalPlace-2;this.currentInputNumber=this.currentInputNumber.round(t,0),this.nextDecimalPlace--}resetCalculatorState(){this.resetInputNumberState(),this.nextOperator=null}resetInputNumberState(){this.currentInputNumber=null,this.decimalButtonPressed=!1,this.nextDecimalPlace=null}unsafeSetNextDecimalPlace(t){this.nextDecimalPlace=t}updateAccumulatorIfNeeded(){null===this.accumulator&&null!==this.currentInputNumber&&(this.accumulator=this.currentInputNumber)}}var A=e.tE,k=e.jt,j=e.WQ,R=e.jf,M=e.XR,q=e.XD,C=e.Qr,$=e.yZ,H=e.yp,L=e.lw,U=e.SJ,X=e.Nj,Q=e.A$,W=e.Re;export{A as Calculator,k as MAX_DECIMAL_PLACES_IN_DISPLAY,j as add,R as assertIsNotNull,M as assertIsSingleDigitNumber,q as decimalPlaceToMultiplier,C as divide,$ as getOpFunc,H as isDigit,L as multiply,U as notImplemented,X as operatorFunc,Q as parseOperator,W as subtract};
//# sourceMappingURL=bundle.js.map